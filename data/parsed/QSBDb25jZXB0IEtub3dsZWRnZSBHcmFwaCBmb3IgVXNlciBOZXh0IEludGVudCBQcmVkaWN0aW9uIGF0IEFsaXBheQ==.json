{
  "A Concept Knowledge Graph for User Next Intent Prediction at Alipay": "Yacheng He Ant Group Hangzhou, China heyachen.hyc@antgroup.com Qianghuai Jia ∗ Ant Group Hangzhou, China qianghuai.jqh@antgroup.com Lin Yuan Ant Group Hangzhou, China huiwai.yl@antgroup.com Ruopeng Li Ant Group Hangzhou, China ruopeng.lrp@antgroup.com Yixin Ou Zhejiang University Hangzhou, China ouyixin@zju.edu.cn",
  "ABSTRACT": "This paper illustrates the technologies of user next intent prediction with a concept knowledge graph. The system has been deployed on the Web at Alipay 1 , serving more than 100 million daily active users. To explicitly characterize user intent, we propose AlipayKG , which is an offline concept knowledge graph in the Life-Service domain modeling the historical behaviors of users, the rich content interacted by users and the relations between them. We further introduce a Transformer-based model which integrates expert rules from the knowledge graph to infer the online user's next intent. Experimental results demonstrate that the proposed system can effectively enhance the performance of the downstream tasks while retaining explainability.",
  "CCS CONCEPTS": "Ningyu Zhang Zhejiang University Hangzhou, China zhangningyu@zju.edu.cn Buy movie tickets Take an internet taxi User Historical Behavior Sequence Location Time Interaction s Online Next Intent Prediction Downstream Applications Intents Order coffee … ? ? … Next Intent Prediction Model Buy snacks Recommender System Search System Transaction Risk Management … isA/Consequent Intent Product Function Consist Consist Sememe Has Has Alipay Knowledge Graph isA Buy movie tickets Movie tickets Buy Consist Consist coupon Has look shows buy Entertainment Ticketing Buy snacks Watch the reality show Watch Reality show image Consequent Has Has Has Has Subgraph Consist Consist The core ontology User_1 history present & future intent product function sememe Alipay Knowledge Graph (b) Next Intent Prediction Framework (c) Downstream Applications · Informationsystems → Queryrepresentation ; Information extraction .",
  "KEYWORDS": "Knowledge Graph; Intent Prediction; Graph Embedding",
  "ACMReference Format:": "Yacheng He, Qianghuai Jia, Lin Yuan, Ruopeng Li, Yixin Ou, and Ningyu Zhang. 2023. A Concept Knowledge Graph for User Next Intent Prediction at Alipay. In Companion Proceedings of the ACM Web Conference 2023 (WWW '23 Companion), April 30-May 4, 2023, Austin, TX, USA. ACM, New York, NY, USA, 4 pages. https://doi.org/10.1145/3543873.3587308",
  "1 INTRODUCTION": "User next intent prediction - the ability to automatically infer the next decision of users based on historical behavior and background knowledge - holds an important place in in-device Apps [5]. For example, in digital life service platforms such as Alipay, users often ∗ Corresponding author. 1 https://global.alipay.com/platform/site/ihome Permission to make digital or hard copies of part or all of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page. Copyrights for third-party components of this work must be honored. For all other uses, contact the owner/author(s). WWW'23 Companion, April 30-May 4, 2023, Austin, TX, USA © 2023 Copyright held by the owner/author(s). ACM ISBN 978-1-4503-9419-2/23/04. (a) Overview of Alipay Knowledge Graph Figure 1: The user next intent prediction system at Alipay. Sub-figure (a) illustrates the core ontology and subgraph of AlipayKG. In sub-figure (b), an example of the user's historical interactions and intent sequence is shown in graygrounded boxes, and the next intent is marked with a red \"?\" that has been inferred as \"buy snacks\" by the next intent prediction model, whose outputs will provide a clear signal to downstream applications as shown in sub-figure (c). purchase snacks at the cinema (corresponding intent \"buy snacks\") after buying movie tickets via TaoPiaoPiao 2 (corresponding intent \"buy movie tickets\"), which implies the intent of \"buy movie tickets\" may lead to the following intent of \"buy snacks.\" As shown in Figure 1, the ability to infer the future intents of users has the potential to be advantageous for tasks such as recommendation, searching, transaction risk management and so on. Intuitively, user intent can be characterized as clustering patterns of user behaviors, which are usually hidden in the content and interacted with or generated by users in mobile applications. Specifically, the core of understanding user intent in Alipay lies in systematic and explicit knowledge modeling of the user's situation and the user's interacted item content, which consists of queries, applet services, bills, coupons, stores, reviews, etc. Concretely, we 2 https://dianying.taobao.com/ https://doi.org/10.1145/3543873.3587308 WWW'23 Companion, April 30-May 4, 2023, Austin, TX, USA Yacheng He, et al. summarize two non-trivial issues in user next intent prediction at Alipay as follows: · How to characterize user intent. It is challenging to abstract and encode intent from user behaviors that are very diverse and can not be directly observed. In particular, unlike e-commerce scenarios such as Amazon 3 which mainly contains shopping intent, the behaviors at Alipay are various, including shopping, trip and payment, which further increases the difficulty of intent representation. · Howtopredicttheuser'snextintentinreal-time. Theuser's next intent is not only based on the user's profile and preference but also largely influenced by spatial and temporal factors. For example, the intent of \"buy movie tickets\" tends to occur at the weekend, while the intent of \"order coffee\" often occurs at Starbucks in the afternoon. To address the above-mentioned issues, we propose a user next intent prediction system based on the Knowledge Graph (KG) and apply it to downstream applications at Alipay. We summarize the contributions of this paper as follows: · We propose AlipayKG , a concept knowledge graph that explicitly represents user behaviors by defining an intent architecture to achieve a unified representation of multi-source heterogeneous data. Meanwhile, we propose a systematic approach to obtain structured knowledge from those multi-source data. With the proposed AlipayKG, we address the first issue. · As for the second issue, we design a next intent prediction framework that integrates expert rules from AlipayKG, which improves the performance while increasing interpretability by expert rules during inference. · We evaluate this system on downstream tasks. Experimental results demonstrate that the proposed system deployed at Alipay can enhance the performance of several real-world applications, which serve more than 100 million daily active users.",
  "2 ALIPAYKG-BASED USER NEXT INTENT PREDICTION SYSTEM": "An overview of our user intent system is presented in Figure 1, and it is composed of two parts as follows: 1) AlipayKG to sufficiently characterize user intent, and 2) Next Intent Prediction Framework to accurately predict the user's next intent in realtime. All collected data are anonymized and reviewed by the IRB committee at Alipay to preserve privacy.",
  "2.1 AlipayKG Construction": "In general, user intent plays a crucial role in promoting the performance and interpretability of user modeling systems. However, uniformly capturing the users' intents and expressing them is arduous due to the various kinds of users' behaviors in digital life service platforms. Therefore, to sufficiently characterize user intent, we propose a concept KG in the Life-Service domain called AlipayKG. The core ontology of AlipayKG is shown in Figure 1(a), which includes four types of nodes and four types of relations. Specifically, \"Intent\" describes the decision drivers behind users' needs and mainly consists of \"Function\" and \"Product,\" such as \"take an 3 https://www.amazon.com/ Figure 2: The process of constructing AlipayKG consists of nodes mining and relations mining (by different colors). phrase mining crowdsourcing Intents bayesian network Intent-isA-Intent Relation Intent-Consequent- Intent Relation Intent Function & Intent Product Sememe isA/Consequent Intent Product Function Consist Consist Sememe Has Has sememe multilabel classification part-of-speech tagging & short text matching lexical rule-based & embedding-based KG Nodes Mining KG Relations Mining Alipay Knowledge Graph Query: withdraw provident fund Bill: Tickets Avatar, Prices … Service: Starbucks, order … Item Content: … Item Content internet taxi 打 网 约 车 \" and \"order coffee 点 咖 啡 . \" Furthermore, \"Product\" and \"Function\" can be represented by more fine-grained Hownet sememes 4 [4] that are regarded as the basic units for semantic understanding, such as \"movie ticket| 电 影 票 = {coupon| 票 证 , look| 看 , shows| 表 演 物 }. \" Meanwhile, we introduce two specific types of relations between \"Intent\" nodes: 1) \"isA\" relation builds the semantic hyponymy of \"Intent\" nodes, such as \"rent an iPhone13 -isA- rent a mobile phone\"; 2) \"Consequent\" relation is used to establish the order effect of \"Intent\" nodes, such as \"buy a house -consequent- renovate a house.\" Figure 2 illustrates the framework of AlipayKG construction, which contains two parts: 1) KG Nodes Mining and 2) KG Relations Mining. It is worth noting that crowdsourcing (we train hundreds of human annotators and ask them to filter incorrect facts in KG) is employed for data quality control throughout the whole process. 2.1.1 KG Nodes Mining. To mine \"Intent\" nodes, we adopt the automated phrase mining approach [3] based on item content and extend it with a self-constructed ground dictionary for high-quality phrase classification, where item content is chosen as our data source since users often directly express their requirements by interacting with items. Although the items in Alipay are multi-source heterogeneous, the text of different items shares the same critical information and can be used as input data sources for knowledge mining. Then, we utilize lexical rule matching, part-of-speech tagging, and short text matching models and structure the \"Intent\" nodes into two parts: \"Function\" and \"Product.\" Moreover, HowNet [4] has a wealth of artificially annotated corpus, through which we train a multi-label classification model [6] to automatically obtain sememe information of \"Function\" and \"Product.\" Due to aliasing and ambiguity issues with node names, we further use alignment models of Bert-Int [7] on \"Intent\" and \"Product\" nodes for semantic disambiguation, respectively. 2.1.2 KG Relations Mining. In this part, the mining methods of the \"isA\" and \"Consequent\" relations between \"Intent\" nodes are elaborated. It is worth noting that the other two relations (i.e., \"Consist\" and \"Has\") have been obtained in the \"KG Nodes Mining\" Section. \"isA\" Relation: Since \"isA\" is used to organize \"Intent\" nodes in a hierarchical tree structure, it is challenging to acquire the knowledge that belongs to common sense through data mining. For 4 https://github.com/thunlp/OpenHowNet.git A Concept Knowledge Graph for User Next Intent Prediction at Alipay WWW'23 Companion, April 30-May 4, 2023, Austin, TX, USA Figure 3: User next intent prediction framework. Figure(a): GCNis learned over the AlipayKG to obtain intent label representation, which is applied to predict output intents. Figure(b): Intent label generation of each item via the multilabel classification model. Figure(c): 1) The encoder receives massive long sequence inputs (intent, location and global time); 2) The decoder receives long sequence inputs, pads the target intents into zero, and instantly predicts output intents (marked orange) in a generative style. Dot Product Informer Encoder Informer Decoder Concatenated Feature Map Predicted Intent Outputs 0 0 0 0 0 isA/Consequent Intent Product Function Consist Consist Sememe Has Has Graph Convolutional Network (GCN) Intent Label Embedding Intent Time Stamp Location Time Stamp Global Time Stamp 𝜲 !\"#$%_'\" 𝜲 !\"#$%_(' AlipayKG Item Text Multi-Label Loss Dot Product N Item Embedding Item Images ResNet StructBERT Encoder … (b) Offline Item-Intent Understanding Model (c) Online Next Intent Prediction Model (a) Intent Representation instance, it is easy to know that \"buy an iPhone13\" is a kind of \"buy a mobile phone,\" but difficult for a machine to understand. To this end, we propose two different methods described as follows: 1) Lexical Rule-based Method: This method utilizes the \"isA\" of the \"Product\" to build the \"isA\" relation between \"Intent\" nodes. For example, \"buy an iPhone13\" and \"buy a mobile phone\" have the same \"Function,\" and it can be obtained from the general knowledge graph that \"iPhone13\" is a kind of \"mobile phone,\" then the relation of \"buy an iPhone13 -isA- buy a mobile phone\" can be generated. 2) Embedding-based Method: This method employs the information of the text semantics to avoid the drawbacks of the lexical rule-based method. Specifically, we first apply StructBERT [8] pre-trained on Alipay corpus to represent the embedding of the \"Product.\" Secondly, we calculate the cosine distance between \"Product\" nodes and recall the top-K candidates with the closest semantics. Finally, we sample the triples having an \"isA\" relation between \"Intent\" nodes. \"Consequent\" Relation: Bayesian network [1] is leveraged from the probability network to mine the \"Consequent\" relation in AlipayKG. Specifically, the \"Intent\" of different time segments is first aggregated as the input of the Bayesian network. After learning the Bayesian network structure, it leverages relation inference to obtain numerous pairs of \"Intent\" nodes. Finally, we can build the \"Consequent\" relation on pairs of highly correlated and order-sensitive \"Intent\" nodes.",
  "2.2 Next Intent Prediction Framework": "Figure 3 illustrates the next intent prediction framework, which consists of two parts: 1) Offline Item-Intent Understanding Model to label the user interacted items with \"Intent,\" and 2) Online User Next Intent Prediction Model to forecast the next intent of users with low latency and high prediction accuracy. 2.2.1 Offline Item-Intent Understanding Model. Since user intent is always hidden in the items that users interact with, it is important to establish the Item-Intent relationships, which can be regarded as a matching problem between \"Item\" and \"Intent.\" For example, \"Starbucks applet\" contains various \"Intent\" such as \"order coffee\" and \"buy coffee beans.\" The overview of the item-intent understanding model is shown in Figure 3(b). Firstly, we follow Kiela et al. [2] to unify the multisource heterogeneous input data. Specifically, we adopt Resnet to extract image features and combine them with text features. Then, the concatenated features are fed into StructBERT [8] model to obtain the item representation. Besides, intent embedding is generated via graph algorithms such as GCN as shown in 3(a). Finally, we can obtain the intent label scores by matching the learned intent embedding with item representation. 2.2.2 Online User Next Intent Prediction Model. Online real-time next intent prediction model needs low latency while guaranteeing high prediction accuracy. Hence, an efficient Transformerbased model for long time-series forecasting named Informer [9] is adopted in our work. In this model, the input consists of three parts: the intent timestamp, the location timestamp and the global timestamp (e.g., the time including Minutes, Hours, Weeks and Months when the intent occurs.). Moreover, AlipayKG is fused into the model to enhance the prediction accuracy, as shown in Figure 3(c). Additionally, the mined rules (such as \"take an internet taxi -consequent- buy movie tickets -consequent- buy snacks\") are applied to the post-processing stage (by literal mapping) of the model, which further improves the interpretability of the predicted results.",
  "2.3 Industrial Deployment": "The proposed system has now been deployed at Alipay for a few months, to support a variety of business scenarios, achieving better online performance. First of all, it can be observed from Figure 4 that the recommendation engine is composed of a recall stage and a ranking stage. In the recall stage, a candidate item set (recall pool) is generated by merging results from different recall methods. In the ranking stage, those candidates are passed through ranking and re-ranking to output the final recommendation list. Secondly, the proposed user intent system is applied to the recommendation engine in the recall and ranking stages. As shown in Figure 4, according to history behavior data and current spatial-temporal information, the next intent prediction model can predict the user's top-K intent candidates with the highest probability, which helps bring the intent-based recall method directly into the recall stage. Meanwhile, the generated Top-K intent candidates, intent embedding and item-intent relations can contribute to better-personalized modeling of user behaviors in the ranking stage. Finally, the whole system is in a positive feedback loop, as shown in Figure 4. User Intent System can predict user intent based on user-interacted data, which facilitates better recommendations. In return, a better recommendation can provide more real user WWW'23 Companion, April 30-May 4, 2023, Austin, TX, USA Yacheng He, et al. Figure 4: Industrial deployment of User Next Intent Prediction System in the Alipay recommendation engine. The recommendation engine contains two stages: the recall stage andtheranking stage. The dataflows of recommended items are guided by the grey arrows. The system provides intent embeddings, item-intent relations and top-K predicted intents based on historical information, thereby improving the performance of the recall and ranking stages and providing users with a more in-demand recommendation list. Item Pool Recall Stage Location-based Method Embedding-based Method Intent-based Method … Recall Pool Ranking Re-Ranking Ranking Stage User Historical Interactions Data User spatial-temporal information Online Next Intent Prediction Model Top-K Predicted Intent Labels AlipayKG Intent Embeddings &Item-Intent Relations User Features & Item Features User Interaction Recommendation List User Intent System Alipay Homepage Offline Item-Intent Understanding Model User Historical Intent Sequence behavior data to improve the performance of intent understanding. Besides, we illustrate the efficacy of the deployment in Section 3.3.",
  "3 EVALUATION": "",
  "3.1 Evaluation of AlipayKG": "In AlipayKG, we have accumulated 104 𝐾 + \"Intent,\" 31 𝐾 + \"Function,\" 66 𝐾 + \"Product,\" and 1 . 9 𝐾 + \"Sememe.\" With the item-intent understanding model, we have collected relatively static data, such as 1 , 316 𝐾 + Service-Intent triples and 57 , 852 𝐾 + Store-Intent triples, and relatively dynamic data, such as 10K-level Coupon-Intent triples and billion-level Bill-Intent triples, etc.",
  "3.2 Evaluation of Next Intent Prediction Framework": "In this Section, we evaluate the proposed intent prediction framework from the following two aspects: 1) Offline Item-Intent Understanding Model: We evaluate our matching model on item-intent prediction with 3 𝐾 + primary intent labels. In this task, we choose the multi-label classification model [6] based on StructBERT[8] Encode as the baseline . Compared with the baseline method, our model introduced in Section 2.2.1 brings an increase of 3.08% and reaches 90.64% in micro-F1. 2) Online Next Intent Prediction Model: We evaluate our nextintent prediction model on 30 𝐾 sampled user historical behavior data. To restore online scenarios, we only predict the user's next intent at a specific time and location. Experimental results show that the baseline method based on the Informer [9] model achieves 50.2% and 83.1% in Recall@1 and Recall@10, respectively. After fusing the Intent Graph Embedding shown in Figure 3(b), the metrics of Recall@1 and Recall@10 increase by 3.1% and 2.2%, respectively.",
  "3.3 Evaluation of Downstream Applications": "In this section, we further evaluate whether the user next intent prediction system can improve the downstream tasks' performance at Alipay. We divide users into buckets for the online A/B test. 1) Home Recommendation: Homerecommendation is one of the essential business scenarios in which our system helps to discover user interests in real-time, as shown in Section 2.3. Online experiments demonstrate that the recommendation performance with the user intent system improves by 1.61% in CTR (Click-Through-Rate). Such a relative increase proves that our system can enhance the recommendation with the real-time predicted user intent. 2) Transaction Risk Management: To create a secure payment environment, the potential risks (e.g., embezzlement and money laundering) of each transaction should be estimated to determine whether it is invalid, which consumes a huge amount of computation. To reduce the cost, we treat users' consumption intent as an important transaction feature to discover low-risk transactions. By leveraging the credible transaction identification based on the proposed user intent system, the coverage rate of low-risk transactions is relatively increased by 100%.",
  "4 CONCLUSION AND FUTURE WORK": "In this work, we present the user intent system and demonstrate its effectiveness in downstream applications deployed in Alipay. In the future, we will continually maintain the AlipayKG to cover more business data and applications, and hopefully, it can benefit more downstream tasks in digital life. Furthermore, we will make efforts in the direction of interpretable reasoning for better user intent prediction.",
  "ACKNOWLEDGMENTS": "This work was supported by the National Natural Science Foundation of China (No.62206246), Zhejiang Provincial Natural Science Foundation of China (No. LGG22F030011), Ningbo Natural Science Foundation (2021J190), and Yongjiang Talent Introduction Programme (2021A-156-G).",
  "REFERENCES": "[1] Finn V Jensen and Thomas Dyhre Nielsen. 2007. Bayesian networks and decision graphs . Vol. 2. Springer. [2] Douwe Kiela, Suvrat Bhooshan, Hamed Firooz, and Davide Testuggine. 2019. Supervised Multimodal Bitransformers for Classifying Images and Text. In NeurIPS Workshop . [3] Feng-Lin Li, Hehong Chen, Guohai Xu, Tian Qiu, Feng Ji, Ji Zhang, and Haiqing Chen. 2020. AliMe KG: Domain Knowledge Graph Construction and Application in E-commerce. In CIKM . [4] Fanchao Qi, Chenghao Yang, Zhiyuan Liu, Qiang Dong, Maosong Sun, and Zhendong Dong. 2019. OpenHowNet: An Open Sememe-based Lexical Knowledge Base. CoRR (2019). [5] Chen Qu, Liu Yang, W Bruce Croft, Yongfeng Zhang, Johanne R Trippas, and Minghui Qiu. 2019. User intent prediction in information-seeking conversations. In CHIIR . [6] Tal Ridnik, Emanuel Ben-Baruch, Nadav Zamir, Asaf Noy, Itamar Friedman, Matan Protter, and Lihi Zelnik-Manor. 2021. Asymmetric Loss for Multi-Label Classification. In Proceedings of the IEEE/CVF International Conference on Computer Vision (ICCV) . 82-91. [7] Xiaobin Tang, Jing Zhang, Bo Chen, Yang Yang, Hong Chen, and Cuiping Li. 2020. BERT-INT:A BERT-based Interaction Model For Knowledge Graph Alignment. In IJCAI . [8] Wei Wang, Bin Bi, Ming Yan, Chen Wu, Jiangnan Xia, Zuyi Bao, Liwei Peng, and Luo Si. 2020. StructBERT: Incorporating Language Structures into Pre-training for Deep Language Understanding. In ICLR . [9] Haoyi Zhou, Shanghang Zhang, Jieqi Peng, Shuai Zhang, Jianxin Li, Hui Xiong, and Wancai Zhang. 2021. Informer: Beyond Efficient Transformer for Long Sequence Time-Series Forecasting. In AAAI .",
  "keywords_parsed": [
    "Knowledge Graph",
    " Intent Prediction",
    " Graph Embedding"
  ]
}